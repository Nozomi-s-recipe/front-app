import { Menu, RecipeImage } from '@/types/types';
import { RECIPE_BLUR } from '@/utils/const';
import Image from 'next/image';
import Link from 'next/link';

export type RecipePreviewProps = {
  image: RecipeImage;
  recipeName: string;
  recipeId: string;
  cookingTime: number;
  ingredientsCount: number;
  mainCategory: Menu;
  subCategory: Menu;
  isPriority?: boolean;
};

export const RecipePreview = ({
  image,
  recipeId,
  recipeName,
  cookingTime,
  ingredientsCount,
  mainCategory,
  subCategory,
  isPriority = false,
}: RecipePreviewProps) => {
  return (
    <Link
      href={`/${mainCategory.id}/${subCategory.id}/${recipeId}`}
      className='block'
      prefetch={true}
    >
      <article className='flex p-1 space-x-1 border border-primary'>
        <figure className='relative w-56 h-40'>
          <Image
            src={`${image.src}?w=224&h=160&q=60&fit=crop&fm=webp`}
            alt={image.alt}
            fill
            sizes='224px'
            priority={isPriority}
            quality={60}
            placeholder='blur'
            blurDataURL={RECIPE_BLUR}
            className='object-cover'
            decoding={isPriority ? 'sync' : 'async'}
            fetchPriority={isPriority ? 'high' : 'auto'}
            loading={isPriority ? 'eager' : 'lazy'}
          />
        </figure>{' '}
        <div className='flex flex-col justify-between w-36'>
          <h2 className='text-xl font-semibold font-mincho line-clamp-2'>
            {recipeName}
          </h2>
          <ul>
            <li className='flex justify-between font-mincho'>
              <span className='flex items-center'>
                <svg
                  width='17'
                  height='17'
                  viewBox='0 0 17 17'
                  fill='none'
                  xmlns='http://www.w3.org/2000/svg'
                  aria-hidden='true'
                  className='shrink-0'
                >
                  <path
                    d='M8.50008 14.5208C11.8253 14.5208 14.5209 11.8252 14.5209 8.49996C14.5209 5.17475 11.8253 2.47913 8.50008 2.47913C5.17487 2.47913 2.47925 5.17475 2.47925 8.49996C2.47925 11.8252 5.17487 14.5208 8.50008 14.5208Z'
                    stroke='currentColor'
                    strokeWidth='0.791667'
                  />
                  <path
                    d='M11.6875 8.50004H8.67708C8.63012 8.50004 8.58508 8.48138 8.55187 8.44817C8.51866 8.41497 8.5 8.36992 8.5 8.32296V6.02087'
                    stroke='currentColor'
                    strokeWidth='0.791667'
                    strokeLinecap='round'
                  />
                </svg>
                <span className='-translate-y-px'>時間</span>
              </span>
              <span>{cookingTime}分</span>
            </li>
            <li className='flex justify-between font-mincho'>
              <span className='flex items-center'>
                <svg
                  width='16'
                  height='17'
                  viewBox='0 0 16 17'
                  fill='none'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <mask id='path-1-inside-1_88_1432' fill='white'>
                    <path d='M14.5 4.75H12.1038L14.1769 2.67688C14.2001 2.65365 14.2185 2.62607 14.2311 2.59572C14.2437 2.56538 14.2502 2.53285 14.2502 2.5C14.2502 2.46715 14.2437 2.43462 14.2311 2.40428C14.2185 2.37393 14.2001 2.34635 14.1769 2.32313C14.1537 2.2999 14.1261 2.28147 14.0957 2.2689C14.0654 2.25633 14.0329 2.24986 14 2.24986C13.9672 2.24986 13.9346 2.25633 13.9043 2.2689C13.874 2.28147 13.8464 2.2999 13.8231 2.32313L11.75 4.39625V2C11.75 1.9337 11.7237 1.87011 11.6768 1.82322C11.6299 1.77634 11.5663 1.75 11.5 1.75C11.4337 1.75 11.3701 1.77634 11.3232 1.82322C11.2764 1.87011 11.25 1.9337 11.25 2V4.5C10.5283 3.95875 9.63565 3.69581 8.73576 3.7594C7.83587 3.823 6.98907 4.20887 6.35065 4.84625C5.28065 5.89563 4.19377 7.70375 3.1194 10.2212C2.37377 11.9712 1.89377 13.4713 1.83252 13.6644C1.77632 13.7786 1.74998 13.9051 1.75596 14.0323C1.76193 14.1594 1.80003 14.283 1.86669 14.3914C1.93336 14.4998 2.02641 14.5896 2.13716 14.6523C2.24792 14.715 2.37275 14.7486 2.50002 14.75C2.61638 14.7497 2.73107 14.7223 2.83502 14.67C3.03002 14.6075 4.53065 14.1294 6.27815 13.3831C8.79627 12.3081 10.6056 11.22 11.6531 10.1512C12.2911 9.51279 12.6774 8.66567 12.7411 7.76535C12.8048 6.86503 12.5417 5.97194 12 5.25H14.5C14.5663 5.25 14.6299 5.22366 14.6768 5.17678C14.7237 5.12989 14.75 5.0663 14.75 5C14.75 4.9337 14.7237 4.87011 14.6768 4.82322C14.6299 4.77634 14.5663 4.75 14.5 4.75ZM11.2963 9.79937C10.6863 10.4244 9.83252 11.0112 8.89815 11.5437L7.1769 9.82312C7.12934 9.78004 7.06704 9.75688 7.00288 9.75846C6.93873 9.76004 6.87764 9.78623 6.83226 9.83161C6.78688 9.87699 6.76069 9.93808 6.75911 10.0022C6.75753 10.0664 6.78068 10.1287 6.82377 10.1763L8.44252 11.7956C5.78815 13.2219 2.70877 14.1875 2.66502 14.1987C2.64972 14.2037 2.63488 14.21 2.62065 14.2175C2.57337 14.2426 2.51927 14.252 2.46631 14.244C2.41335 14.2361 2.36432 14.2114 2.32646 14.1736C2.28859 14.1357 2.26389 14.0867 2.25598 14.0337C2.24807 13.9808 2.25737 13.9267 2.28252 13.8794C2.29003 13.8651 2.2963 13.8503 2.30127 13.835C2.3194 13.7725 4.15877 7.8975 6.52752 5.38062L8.82377 7.67625C8.87064 7.723 8.93414 7.74926 9.00033 7.74926C9.06653 7.74926 9.13003 7.723 9.1769 7.67625C9.22365 7.62938 9.24991 7.56589 9.24991 7.49969C9.24991 7.43349 9.22365 7.36999 9.1769 7.32312L6.88627 5.0325C7.52514 4.49074 8.34852 4.21657 9.18465 4.26719C10.0208 4.31782 10.8051 4.68932 11.3739 5.3042C11.9427 5.91908 12.2522 6.72985 12.2378 7.56737C12.2233 8.4049 11.886 9.2045 11.2963 9.79937Z' />
                  </mask>
                  <path
                    d='M14.5 4.75H12.1038L14.1769 2.67688C14.2001 2.65365 14.2185 2.62607 14.2311 2.59572C14.2437 2.56538 14.2502 2.53285 14.2502 2.5C14.2502 2.46715 14.2437 2.43462 14.2311 2.40428C14.2185 2.37393 14.2001 2.34635 14.1769 2.32313C14.1537 2.2999 14.1261 2.28147 14.0957 2.2689C14.0654 2.25633 14.0329 2.24986 14 2.24986C13.9672 2.24986 13.9346 2.25633 13.9043 2.2689C13.874 2.28147 13.8464 2.2999 13.8231 2.32313L11.75 4.39625V2C11.75 1.9337 11.7237 1.87011 11.6768 1.82322C11.6299 1.77634 11.5663 1.75 11.5 1.75C11.4337 1.75 11.3701 1.77634 11.3232 1.82322C11.2764 1.87011 11.25 1.9337 11.25 2V4.5C10.5283 3.95875 9.63565 3.69581 8.73576 3.7594C7.83587 3.823 6.98907 4.20887 6.35065 4.84625C5.28065 5.89563 4.19377 7.70375 3.1194 10.2212C2.37377 11.9712 1.89377 13.4713 1.83252 13.6644C1.77632 13.7786 1.74998 13.9051 1.75596 14.0323C1.76193 14.1594 1.80003 14.283 1.86669 14.3914C1.93336 14.4998 2.02641 14.5896 2.13716 14.6523C2.24792 14.715 2.37275 14.7486 2.50002 14.75C2.61638 14.7497 2.73107 14.7223 2.83502 14.67C3.03002 14.6075 4.53065 14.1294 6.27815 13.3831C8.79627 12.3081 10.6056 11.22 11.6531 10.1512C12.2911 9.51279 12.6774 8.66567 12.7411 7.76535C12.8048 6.86503 12.5417 5.97194 12 5.25H14.5C14.5663 5.25 14.6299 5.22366 14.6768 5.17678C14.7237 5.12989 14.75 5.0663 14.75 5C14.75 4.9337 14.7237 4.87011 14.6768 4.82322C14.6299 4.77634 14.5663 4.75 14.5 4.75ZM11.2963 9.79937C10.6863 10.4244 9.83252 11.0112 8.89815 11.5437L7.1769 9.82312C7.12934 9.78004 7.06704 9.75688 7.00288 9.75846C6.93873 9.76004 6.87764 9.78623 6.83226 9.83161C6.78688 9.87699 6.76069 9.93808 6.75911 10.0022C6.75753 10.0664 6.78068 10.1287 6.82377 10.1763L8.44252 11.7956C5.78815 13.2219 2.70877 14.1875 2.66502 14.1987C2.64972 14.2037 2.63488 14.21 2.62065 14.2175C2.57337 14.2426 2.51927 14.252 2.46631 14.244C2.41335 14.2361 2.36432 14.2114 2.32646 14.1736C2.28859 14.1357 2.26389 14.0867 2.25598 14.0337C2.24807 13.9808 2.25737 13.9267 2.28252 13.8794C2.29003 13.8651 2.2963 13.8503 2.30127 13.835C2.3194 13.7725 4.15877 7.8975 6.52752 5.38062L8.82377 7.67625C8.87064 7.723 8.93414 7.74926 9.00033 7.74926C9.06653 7.74926 9.13003 7.723 9.1769 7.67625C9.22365 7.62938 9.24991 7.56589 9.24991 7.49969C9.24991 7.43349 9.22365 7.36999 9.1769 7.32312L6.88627 5.0325C7.52514 4.49074 8.34852 4.21657 9.18465 4.26719C10.0208 4.31782 10.8051 4.68932 11.3739 5.3042C11.9427 5.91908 12.2522 6.72985 12.2378 7.56737C12.2233 8.4049 11.886 9.2045 11.2963 9.79937Z'
                    fill='black'
                    stroke='black'
                    strokeWidth='2'
                    mask='url(#path-1-inside-1_88_1432)'
                  />
                </svg>
                <span className='-translate-y-px'>材料数</span>
              </span>
              <span>{ingredientsCount}個</span>
            </li>
          </ul>
        </div>
      </article>
    </Link>
  );
};
